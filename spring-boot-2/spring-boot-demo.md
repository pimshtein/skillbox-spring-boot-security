Всем привет.
В этом видео мы сами соберем свой стартер и подключим его в одном из проектов.
Давайте посмотрим на my-spring-boot-starter.
У нас есть MyService класс с какой-то функциональностью.
А также есть MyAutoConfiguration, в котором создается бин MyService.

Напишем в build-gradle следующий код.
Обратите внимание на секции group, version.
В них будет название и версия нашего будущего стартера.

Обратите внимание на spring.factories файл.
Spring Boot поддерживает механизм автоконфигурации: когда вы подключаете зависимость-стартер, Spring Boot автоматически находит и подключает нужные бины и настройки.
Для этого он ищет файл META-INF/spring.factories во всех зависимостях.
В этом файле указывается, какие классы-конфигурации (например, MyAutoConfiguration) нужно автоматически подключить.

Давайте сбилдим наш стартер.
Сделаем это через idea.

После build мы видим, что в папке build/libs появился артефакт с именем и версией, которые мы задавали и с расширением jar.

Теперь этот стартер в виде jar подключим в другом проекте.
Открываем spring-boot-demo и пишем там следующий код.
В flatDir указываем путь до нашего стартера.
В производстве на боевых проектах это делают немного по-другому: публикуют артефакты в какой-то внутренний репозиторий, настраивают его и в других
проектах подключают и gradle или maven автоматом его скачивают на локальный компьютер.

Но наш пример тем не менее похож на то, что используют в реальности.

Мы же не стали делать это через какой-то репозиторий, а напрямую указали, где хранится наш файл.

Попробуем сбилдить наш проект.

Как видим, все прошло успешно и теперь если перенестись в HelloController, можно увидеть подключенную зависимость.
Давайте запустим проект.
Как видимо, успешно стартовал Spring со всеми зависимостями, в том числе с нашим стартером и бином MyService, запустился tomcat.
Нам не нужно было писать каких-то дополнительный конфигураций и совершать дополнительные действия.
Мы просто указали готовый стартер и при старте Spring бин создался автоматом.

Перейдем по адресу http://localhost:8081/custom, видим, что вызвался сервис из подключенного стартера.

Итак, на этом уроке мы создали свой собственный стартер, и подключили его в отдельном проекте.